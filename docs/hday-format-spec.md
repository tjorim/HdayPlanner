# `.hday` File Format Specification

A simple text-based format for tracking time off. Each line represents a single event or recurring pattern.

## Basic Syntax

```
[flags]<date-pattern> [# comment]
```

## Date Patterns

**Single or Range:**
```
YYYY/MM/DD               # Single day
YYYY/MM/DD-YYYY/MM/DD    # Date range (inclusive)
```

**Weekly Recurring:**
```
d<1-7>    # Recurring every week on specific day (ISO weekday: 1=Monday, 7=Sunday)
```

## Prefix Flags

Flags modify the type or timing of an event. Multiple flags can be combined.

### Time/Location Flags (Mutually Exclusive)
Only one of these flags can be used at a time:
- `a` - Half day **morning/AM** off
- `p` - Half day a**fternoon/PM** off
- `w` - Onsite support (outside usual location)
- `n` - **N**ot able to fly
- `f` - In principle able to **f**ly, to be aligned

### Type Flags
- `b` - **Business** trip / out for work
- `s` - Training / cour**se**
- `i` - **In** office (override - marks presence)
- *(no flag)* - Regular vacation/holiday

## Flag Combinations

Flags can be combined by concatenating them. Common patterns:

| Flags | Meaning | Display Color |
|-------|---------|---------------|
| *(none)* | Regular vacation/holiday | Red (#FF0000) |
| `a` | Half day AM off | Red with `,` (#FF9999) |
| `p` | Half day PM off | Red with `'` (#FF9999) |
| `b` | Business trip (full day) | Orange (#FFA500) |
| `ab` | Business trip, half day AM | Orange with `,` (#FFCC77) |
| `pb` | Business trip, half day PM | Orange with `'` (#FFCC77) |
| `s` | Training/course (full day) | Dark Yellow/Gold (#D9AD00) |
| `as` | Training, half day AM | Light Yellow with `,` (#F0D04D) |
| `ps` | Training, half day PM | Light Yellow with `'` (#F0D04D) |
| `i` | In office | Teal (#008899) |
| `ai` | In office, half day AM | Light Teal with `,` (#00B8CC) |
| `pi` | In office, half day PM | Light Teal with `'` (#00B8CC) |

**Note:** Weekly recurring events (`d1-d7`) follow the same flag-based color scheme as above. For example, `d1` (Monday) is red, `d5b` (business Friday) is orange, `d2s` (training Tuesday) is dark yellow, etc. Location flags like `w`, `n`, `f` can also be combined (e.g., `d3w` for onsite Wednesday).

## Comments and Metadata

```
# Comment         # Line starting with # is ignored
r Release info   # Line starting with 'r' is a metadata line (release tag from tools)
```

## Keyword Detection (for automated calendar export tools)

Legacy Outlook integration detected event types by calendar subject keywords:

- **Vacation/Holiday** (no flag): "VAKANTIE", "VACATION", "HOLIDAY"
- **Training** (`s` flag): "CURSUS", "TRAINING", "COURSE"
- **Business** (`b` flag): Default for out-of-office without above keywords
- **Private** appointments: Subject replaced with "Private" text

## Complete Examples

```hday
# Regular vacation
2024/12/23-2025/01/05 # Christmas vacation
2024/08/05-2024/08/11 # Summer vacation week 1

# Half days
p2024/03/26-2024/03/26 # Half day PM off
a2024/05/15-2024/05/15 # Half day AM off

# Business trips
b2024/06/10-2024/06/12 # Business trip
pb2024/09/15-2024/09/15 # Business trip, back at half day PM

# Training
s2024/04/08-2024/04/08 # Training course
as2024/03/12-2024/03/12 # Training in morning only

# In office (override for presence)
i2024/07/01-2024/07/01 # In office despite vacation period
ip2024/03/20-2024/03/20 # In office, leaving at noon

# Weekly recurring (ISO weekday: 1=Mon, 7=Sun)
d1 # Every Monday off
d5 # Every Friday off
d3p # Every Wednesday afternoon off

# Metadata
r Generated by: holidaytool V1.0RC7
```

## Display Color Reference

When rendered in team overview pages:

| Color | Hex | Meaning |
|-------|-----|---------|
| Red | #FF0000 | Off work / vacation |
| Pink | #FF9999 | Half day off (`,` = AM, `'` = PM) |
| Orange | #FFA500 | Business trip |
| Light Orange | #FFCC77 | Half day business |
| Yellow | #D9AD00 | Training / course |
| Light Yellow | #F0D04D | Half day training |
| Cyan | #008899 | Other / in office |
| Light Cyan | #00B8CC | Half day other |
| Gray | #AAAAAA | Weekend |
| Light Blue | #AAAAFF | Official holiday (CR day) |
| Light Green | #BBFFBB | In during school vacation |
| Green | #90EE90 | Regular work day / "today" marker |

**Note:** Weekly recurring events (regular weekly day off) use the same color scheme based on their flags (business/course/in) rather than a fixed Magenta color.

## Special Symbols (in team overviews)

- `,` (comma) = Half day AM indicator
- `'` (apostrophe) = Half day PM indicator
- `.` (dot) = Today marker
- `C` = Onsite support outside VHV
- `N` = Not able to fly
- `F` = In principle able to fly, to be aligned

## Compatibility with Legacy Systems

The `.hday` format maintains compatibility with legacy ASML holiday overview systems:
- Prefix flags (`a`, `p`, `b`, `s`, `i`, `w`, `n`, `f`) are preserved
- Date ranges use the same format: `[flags]YYYY/MM/DD-YYYY/MM/DD`
- Weekly recurring patterns use ISO weekday: `dN[flags]` where N is 1-7 (Mon-Sun)
- Optional `# title` comments are supported
- Existing overview pages continue working since files and structure remain unchanged
