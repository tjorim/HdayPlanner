# Holiday Planner

A modern web-based holiday/vacation tracking system using the `.hday` file format. This project provides tools for viewing, editing, and managing vacation schedules compatible with legacy ASML holiday overview systems.

## üéØ Overview

This repository contains multiple tools for working with `.hday` files:

1. **Standalone Viewer** ([hday_viewer.html](hday_viewer.html)) - Client-side only, no backend needed
2. **Full-Stack Application** ([holiday-planner/](holiday-planner/)) - FastAPI backend + React frontend
3. **Analysis Scripts** - PowerShell and Bash tools to discover flag patterns in existing files

## üöÄ Quick Start - Standalone Viewer

The easiest way to get started is with the standalone HTML viewer:

1. Open [hday_viewer.html](hday_viewer.html) in your browser
2. Load your `.hday` file or paste content directly
3. View events in a calendar or edit individual entries
4. Export back to `.hday` format

**Try it now:** You can use [example-user.hday](example-user.hday) as sample data.

## üìã The `.hday` File Format Specification

A simple text-based format for tracking time off. Each line represents a single event or recurring pattern.

### Basic Syntax

```
[flags]<date-pattern> [# comment]
```

### Date Patterns

**Single or Range:**
```
YYYY/MM/DD               # Single day
YYYY/MM/DD-YYYY/MM/DD    # Date range (inclusive)
```

**Weekly Recurring:**
```
d<0-6>    # Recurring every week on specific day (0=Sunday, 6=Saturday)
```

### Prefix Flags

Flags modify the type or timing of an event. Multiple flags can be combined.

#### Time Flags (Half Days)
- `a` - Half day **morning/AM** off
- `p` - Half day a**fternoon/PM** off

#### Type Flags
- `b` - **Business** trip / out for work
- `s` - Training / cour**se**
- `i` - **In** office (override - marks presence)
- *(no flag)* - Regular vacation/holiday

### Flag Combinations

Flags can be combined by concatenating them. Common patterns:

| Flags | Meaning | Display Color |
|-------|---------|---------------|
| *(none)* | Regular vacation/holiday | Red (#FF0000) |
| `a` | Half day AM off | Red with `,` (#FF9999) |
| `p` | Half day PM off | Red with `'` (#FF9999) |
| `b` | Business trip (full day) | Orange (#FFA500) |
| `ab` | Business trip, half day AM | Orange with `,` (#FFCC77) |
| `pb` | Business trip, half day PM | Orange with `'` (#FFCC77) |
| `s` | Training/course (full day) | Yellow (#FFFF00) |
| `as` | Training, half day AM | Yellow with `,` (#FFFF99) |
| `ps` | Training, half day PM | Yellow with `'` (#FFFF99) |
| `i` | In office | Cyan (#00FFFF) |
| `ai` | In office, half day AM | Cyan with `,` (#99FFFF) |
| `pi` | In office, half day PM | Cyan with `'` (#99FFFF) |
| `d0-d6` | Weekly recurring | Magenta (#FF00FF) |

### Comments and Metadata

```
# Comment         # Line starting with # is ignored
r Release info   # Line starting with 'r' is a metadata line (release tag from tools)
```

### Keyword Detection (for automated calendar export tools)

Legacy Outlook integration detected event types by calendar subject keywords:

- **Vacation/Holiday** (no flag): "VAKANTIE", "VACATION", "HOLIDAY"
- **Training** (`s` flag): "CURSUS", "TRAINING", "COURSE"
- **Business** (`b` flag): Default for out-of-office without above keywords
- **Private** appointments: Subject replaced with "Private" text

### Complete Examples

```hday
# Regular vacation
2024/12/23-2025/01/05 # Christmas vacation
2024/08/05-2024/08/11 # Summer vacation week 1

# Half days
p2024/03/26-2024/03/26 # Half day PM off
a2024/05/15-2024/05/15 # Half day AM off

# Business trips
b2024/06/10-2024/06/12 # Business trip
pb2024/09/15-2024/09/15 # Business trip, back at half day PM

# Training
s2024/04/08-2024/04/08 # Training course
as2024/03/12-2024/03/12 # Training in morning only

# In office (override for presence)
i2024/07/01-2024/07/01 # In office despite vacation period
ip2024/03/20-2024/03/20 # In office, leaving at noon

# Weekly recurring
d1 # Every Monday off
d5 # Every Friday off
pd3 # Every Wednesday afternoon off

# Metadata
r Generated by: holidaytool V1.0RC7
```

### Display Color Reference

When rendered in team overview pages:

| Color | Hex | Meaning |
|-------|-----|---------|
| Red | #FF0000 | Off work / vacation |
| Pink | #FF9999 | Half day off (`,` = AM, `'` = PM) |
| Magenta | #FF00FF | Regular weekly day off |
| Orange | #FFA500 | Business trip |
| Light Orange | #FFCC77 | Half day business |
| Yellow | #FFFF00 | Training / course |
| Light Yellow | #FFFF99 | Half day training |
| Cyan | #00FFFF | Other / in office |
| Light Cyan | #99FFFF | Half day other |
| Gray | #AAAAAA | Weekend |
| Light Blue | #AAAAFF | Official holiday (CR day) |
| Light Green | #BBFFBB | In during school vacation |
| Green | #90EE90 | Regular work day / "today" marker |

### Special Symbols (in team overviews)

- `,` (comma) = Half day AM indicator
- `'` (apostrophe) = Half day PM indicator
- `.` (dot) = Today marker
- `C` = Onsite support outside VHV
- `N` = Not able to fly
- `F` = In principle able to fly, to be aligned

## üèóÔ∏è Full-Stack Application

The [holiday-planner/](holiday-planner/) directory contains a complete web application:

### Backend (FastAPI + Python)
- RESTful API for reading/writing `.hday` files
- Configurable shared directory support
- Audit logging
- Authentication stub (ready for Azure AD)
- Microsoft Graph sync placeholder

### Frontend (React + Vite + TypeScript)
- Month-based calendar view
- Event editor with validation
- User and team schedule views
- Save directly to `.hday` files

See [holiday-planner/README.md](holiday-planner/README.md) for setup instructions.

## üìÅ Repository Structure

```
HdayPlanner/
‚îú‚îÄ‚îÄ hday_viewer.html           # Standalone viewer/editor (no backend needed)
‚îú‚îÄ‚îÄ example-user.hday          # Example .hday file with sample data
‚îú‚îÄ‚îÄ example-team-overview.html # Example legacy team overview with complete legend
‚îú‚îÄ‚îÄ analyze-hday-patterns.ps1  # PowerShell script to analyze .hday files
‚îú‚îÄ‚îÄ analyze-hday-patterns.sh   # Bash script to analyze .hday files
‚îú‚îÄ‚îÄ holiday-planner/           # Full-stack web application
‚îÇ   ‚îú‚îÄ‚îÄ backend/              # FastAPI server
‚îÇ   ‚îî‚îÄ‚îÄ frontend/             # React application
‚îî‚îÄ‚îÄ README.md                 # This file
```

## üîç Analysis Scripts

Two scripts are provided to analyze existing `.hday` files and discover all flag patterns in use:

### PowerShell (Windows)
```powershell
.\analyze-hday-patterns.ps1 -Path "\\network\share\CUG_holiday"
.\analyze-hday-patterns.ps1 -Path "\\network\share\CUG_holiday" -MaxFiles 100
```

### Bash (Linux/Mac/WSL)
```bash
./analyze-hday-patterns.sh /mnt/share/CUG_holiday
./analyze-hday-patterns.sh /mnt/share/CUG_holiday 100
```

**What they do:**
- Scan all `.hday` files in a directory
- Extract and count unique prefix patterns (`p`, `a`, `pb`, `ip`, etc.)
- Calculate usage percentages
- Show examples of each pattern
- Identify unknown or rare flag combinations

This is useful for discovering all the ways flags are combined in your organization's `.hday` files.

## üåê GitHub Pages Deployment

To deploy the standalone viewer to GitHub Pages:

1. Enable GitHub Pages in repository settings
2. Set source to `main` branch, root directory
3. Access at: `https://yourusername.github.io/HdayPlanner/hday_viewer.html`

The standalone viewer works entirely client-side (no backend required).

## ü§ù Contributing

Contributions welcome! Areas of interest:
- Additional export formats (iCal, CSV, etc.)
- Mobile-responsive improvements
- Integration with other calendar systems
- Documentation improvements

## üìù License

[Add your chosen license here]

## üôè Credits

Originally developed for ASML's internal holiday tracking system. This open-source version maintains compatibility with the `.hday` format while modernizing the user experience.